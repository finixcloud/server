/*! For license information please see dav-settings-personal-availability.js.LICENSE.txt */
(()=>{var n,t={52984:(n,t,a)=>{"use strict";var e=a(20144),i=a(9944),o=a(51796),l=a(81063),r=a(4820),d=a(56580),s=a.n(d),A=a(79753),p=a(22200);const c=s()((n=>(r.default.defaults.headers["X-Requested-With"]="XMLHttpRequest",l.getPatcher().patch("request",r.default),l.createClient((0,A.generateRemoteUrl)("dav/".concat(n,"/").concat((0,p.getCurrentUser)().uid)))))),v=(0,a(17499).IY)().setApp("dav").detectUser().build();var b=a(7582),C=a(55586),u=a.n(C),m=a(48254),y=a.n(m),x=a(1412),g=a.n(x);const f={name:"Availability",components:{CalendarAvailability:o.Dx,TimezonePicker:y(),Button:g()},data(){const n=u().determine();return{loading:!0,saving:!1,timezone:n?n.name():"UTC",slots:{MO:[],TU:[],WE:[],TH:[],FR:[],SA:[],SU:[]}}},async mounted(){try{const n=await async function(){var n,t,a;const e=c("calendars"),i=await e.customRequest("inbox",{method:"PROPFIND",data:'<?xml version="1.0"?>\n\t\t\t<x0:propfind xmlns:x0="DAV:">\n\t\t\t  <x0:prop>\n\t\t\t\t<x1:calendar-availability xmlns:x1="urn:ietf:params:xml:ns:caldav"/>\n\t\t\t  </x0:prop>\n\t\t\t</x0:propfind>'}),l=await(0,b.parseXML)(i.data);if(!l)return;const r=null==l||null===(n=l.multistatus)||void 0===n||null===(t=n.response[0])||void 0===t||null===(a=t.propstat)||void 0===a?void 0:a.prop["calendar-availability"];return r?(0,o.Xg)(r):void 0}();if(n){const{slots:t,timezoneId:a}=n;this.slots=t,a&&(this.timezone=a),console.info("availability loaded",this.slots,this.timezoneId)}else console.info("no availability is set"),this.slots={MO:[],TU:[],WE:[],TH:[],FR:[],SA:[],SU:[]}}catch(n){console.error("could not load existing availability",n)}finally{this.loading=!1}},methods:{async save(){try{this.saving=!0,await async function(n,t){const a=[...Object.keys(n).flatMap((t=>n[t].map((n=>({...n,day:t})))))],e=(0,o.ST)(a,t);v.debug("New availability ical created",{vavailability:e});const i=c("calendars");await i.customRequest("inbox",{method:"PROPPATCH",data:'<?xml version="1.0"?>\n\t\t\t<x0:propertyupdate xmlns:x0="DAV:">\n\t\t\t  <x0:set>\n\t\t\t\t<x0:prop>\n\t\t\t\t  <x1:calendar-availability xmlns:x1="urn:ietf:params:xml:ns:caldav">'.concat(e,"</x1:calendar-availability>\n\t\t\t\t</x0:prop>\n\t\t\t  </x0:set>\n\t\t\t</x0:propertyupdate>")})}(this.slots,this.timezone)}catch(n){console.error("could not save availability",n)}finally{this.saving=!1}}}};var h=a(93379),w=a.n(h),B=a(7795),k=a.n(B),D=a(90569),E=a.n(D),O=a(3565),_=a.n(O),T=a(19216),$=a.n(T),z=a(44589),S=a.n(z),P=a(9752),U={};U.styleTagTransform=S(),U.setAttributes=_(),U.insert=E().bind(null,"head"),U.domAPI=k(),U.insertStyleElement=$(),w()(P.Z,U),P.Z&&P.Z.locals&&P.Z.locals;const R=(0,a(51900).Z)(f,(function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"section"},[a("h2",[n._v(n._s(n.$t("dav","Availability")))]),n._v(" "),a("p",[n._v("\n\t\t"+n._s(n.$t("dav","If you configure your working hours, other users will see when you are out of office when they book a meeting."))+"\n\t")]),n._v(" "),a("div",{staticClass:"time-zone"},[a("strong",[n._v("\n\t\t\t"+n._s(n.$t("dav","Time zone:"))+"\n\t\t")]),n._v(" "),a("span",{staticClass:"time-zone-text"},[a("TimezonePicker",{model:{value:n.timezone,callback:function(t){n.timezone=t},expression:"timezone"}})],1)]),n._v(" "),a("CalendarAvailability",{attrs:{slots:n.slots,loading:n.loading,"l10n-to":n.$t("dav","to"),"l10n-delete-slot":n.$t("dav","Delete slot"),"l10n-empty-day":n.$t("dav","No working hours set"),"l10n-add-slot":n.$t("dav","Add slot"),"l10n-monday":n.$t("dav","Monday"),"l10n-tuesday":n.$t("dav","Tuesday"),"l10n-wednesday":n.$t("dav","Wednesday"),"l10n-thursday":n.$t("dav","Thursday"),"l10n-friday":n.$t("dav","Friday"),"l10n-saturday":n.$t("dav","Saturday"),"l10n-sunday":n.$t("dav","Sunday")},on:{"update:slots":function(t){n.slots=t}}}),n._v(" "),a("Button",{attrs:{disabled:n.loading||n.saving,type:"primary"},on:{click:n.save}},[n._v("\n\t\t"+n._s(n.$t("dav","Save"))+"\n\t")])],1)}),[],!1,null,"8127b8b8",null).exports;e.default.prototype.$t=i.translate,new(e.default.extend(R))({}).$mount("#settings-personal-availability")},9752:(n,t,a)=>{"use strict";a.d(t,{Z:()=>r});var e=a(87537),i=a.n(e),o=a(23645),l=a.n(o)()(i());l.push([n.id,".availability-day[data-v-8127b8b8]{padding:0 10px 0 10px;position:absolute}.availability-slots[data-v-8127b8b8]{display:flex;white-space:nowrap}.availability-slot[data-v-8127b8b8]{display:flex;flex-direction:row;align-items:center}.availability-slot-group[data-v-8127b8b8]{display:flex;flex-direction:column}[data-v-8127b8b8] .mx-input-wrapper{width:85px}[data-v-8127b8b8] .mx-datepicker{width:97px}[data-v-8127b8b8] .multiselect{border:1px solid var(--color-border-dark);width:120px}.time-zone[data-v-8127b8b8]{padding:32px 12px 12px 0}.grid-table[data-v-8127b8b8]{display:grid;margin-bottom:32px;grid-column-gap:24px;grid-row-gap:6px;grid-template-columns:min-content min-content min-content}.button[data-v-8127b8b8]{align-self:flex-end}.label-weekday[data-v-8127b8b8]{position:relative;display:inline-flex;padding-top:4px}.delete-slot[data-v-8127b8b8]{background-color:rgba(0,0,0,0);border:none;padding-bottom:12px;opacity:.5}.delete-slot[data-v-8127b8b8]:hover{opacity:1}.add-another[data-v-8127b8b8]{background-color:rgba(0,0,0,0);border:none;opacity:.5;display:inline-flex;padding:0;margin:0;margin-bottom:3px}.add-another[data-v-8127b8b8]:hover{opacity:1}.to-text[data-v-8127b8b8]{padding-right:12px}.time-zone-text[data-v-8127b8b8]{padding-left:22px}.empty-content[data-v-8127b8b8]{color:var(--color-text-lighter);margin-top:4px}","",{version:3,sources:["webpack://./apps/dav/src/views/Availability.vue"],names:[],mappings:"AA4GA,mCACC,qBAAA,CACA,iBAAA,CAED,qCACC,YAAA,CACA,kBAAA,CAED,oCACC,YAAA,CACA,kBAAA,CACA,kBAAA,CAED,0CACC,YAAA,CACA,qBAAA,CAED,oCACC,UAAA,CAED,iCACC,UAAA,CAED,+BACC,yCAAA,CACA,WAAA,CAED,4BACC,wBAAA,CAED,6BACC,YAAA,CACA,kBAAA,CACA,oBAAA,CACA,gBAAA,CACA,yDAAA,CAED,yBACC,mBAAA,CAED,gCACC,iBAAA,CACA,mBAAA,CACA,eAAA,CAED,8BACC,8BAAA,CACA,WAAA,CACA,mBAAA,CACA,UAAA,CACA,oCACC,SAAA,CAIF,8BACC,8BAAA,CACA,WAAA,CACA,UAAA,CACA,mBAAA,CACA,SAAA,CACA,QAAA,CACA,iBAAA,CAEA,oCACC,SAAA,CAGF,0BACC,kBAAA,CAED,iCACC,iBAAA,CAED,gCACC,+BAAA,CACA,cAAA",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.availability-day {\n\tpadding: 0 10px 0 10px;\n\tposition: absolute;\n}\n.availability-slots {\n\tdisplay: flex;\n\twhite-space: nowrap;\n}\n.availability-slot {\n\tdisplay: flex;\n\tflex-direction: row;\n\talign-items: center;\n}\n.availability-slot-group {\n\tdisplay: flex;\n\tflex-direction: column;\n}\n::v-deep .mx-input-wrapper {\n\twidth: 85px;\n}\n::v-deep .mx-datepicker {\n\twidth: 97px;\n}\n::v-deep .multiselect {\n\tborder: 1px solid var(--color-border-dark);\n\twidth: 120px;\n}\n.time-zone {\n\tpadding: 32px 12px 12px 0;\n}\n.grid-table {\n\tdisplay: grid;\n\tmargin-bottom: 32px;\n\tgrid-column-gap: 24px;\n\tgrid-row-gap: 6px;\n\tgrid-template-columns: min-content min-content min-content;\n}\n.button {\n\talign-self: flex-end;\n}\n.label-weekday {\n\tposition: relative;\n\tdisplay: inline-flex;\n\tpadding-top: 4px;\n}\n.delete-slot {\n\tbackground-color: transparent;\n\tborder: none;\n\tpadding-bottom: 12px;\n\topacity: .5;\n\t&:hover {\n\t\topacity: 1;\n\t}\n}\n\n.add-another {\n\tbackground-color: transparent;\n\tborder: none;\n\topacity: .5;\n\tdisplay: inline-flex;\n\tpadding: 0;\n\tmargin: 0;\n\tmargin-bottom: 3px;\n\n\t&:hover {\n\t\topacity: 1;\n\t}\n}\n.to-text {\n\tpadding-right: 12px;\n}\n.time-zone-text{\n\tpadding-left: 22px;\n}\n.empty-content {\n\tcolor: var(--color-text-lighter);\n\tmargin-top: 4px;\n}\n\n"],sourceRoot:""}]);const r=l},69862:()=>{},40964:()=>{}},a={};function e(n){var i=a[n];if(void 0!==i)return i.exports;var o=a[n]={id:n,loaded:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}e.m=t,e.amdD=function(){throw new Error("define cannot be used indirect")},e.amdO={},n=[],e.O=(t,a,i,o)=>{if(!a){var l=1/0;for(A=0;A<n.length;A++){a=n[A][0],i=n[A][1],o=n[A][2];for(var r=!0,d=0;d<a.length;d++)(!1&o||l>=o)&&Object.keys(e.O).every((n=>e.O[n](a[d])))?a.splice(d--,1):(r=!1,o<l&&(l=o));if(r){n.splice(A--,1);var s=i();void 0!==s&&(t=s)}}return t}o=o||0;for(var A=n.length;A>0&&n[A-1][2]>o;A--)n[A]=n[A-1];n[A]=[a,i,o]},e.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},e.d=(n,t)=>{for(var a in t)e.o(t,a)&&!e.o(n,a)&&Object.defineProperty(n,a,{enumerable:!0,get:t[a]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),e.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.nmd=n=>(n.paths=[],n.children||(n.children=[]),n),e.j=3347,(()=>{e.b=document.baseURI||self.location.href;var n={3347:0};e.O.j=t=>0===n[t];var t=(t,a)=>{var i,o,l=a[0],r=a[1],d=a[2],s=0;if(l.some((t=>0!==n[t]))){for(i in r)e.o(r,i)&&(e.m[i]=r[i]);if(d)var A=d(e)}for(t&&t(a);s<l.length;s++)o=l[s],e.o(n,o)&&n[o]&&n[o][0](),n[o]=0;return e.O(A)},a=self.webpackChunknextcloud=self.webpackChunknextcloud||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),e.nc=void 0;var i=e.O(void 0,[7874],(()=>e(52984)));i=e.O(i)})();
//# sourceMappingURL=dav-settings-personal-availability.js.map?v=517c00879361bb85d015